{"version":3,"file":"index.js","sources":["../../src/node/utils.ts","../../src/node/plugin.ts"],"sourcesContent":["import { Logger } from \"vuepress-shared/node\";\n\nexport const logger = new Logger(\"vuepress-plugin-lightgallery\");\n","import { getDirname, path } from \"@vuepress/utils\";\nimport { useSassPalettePlugin } from \"vuepress-plugin-sass-palette\";\nimport { addViteOptimizeDepsExclude } from \"vuepress-shared/node\";\n\nimport { logger } from \"./utils.js\";\n\nimport type { PluginFunction } from \"@vuepress/core\";\nimport type { LightGalleryOptions } from \"./options.js\";\n\nconst __dirname = getDirname(import.meta.url);\n\nexport const lightgalleryPlugin =\n  (options: LightGalleryOptions = {}): PluginFunction =>\n  (app) => {\n    if (app.env.isDebug) logger.info(\"Options:\", options);\n\n    const plugins = options.plugins || [\"pager\", \"share\", \"zoom\"];\n\n    useSassPalettePlugin(app, { id: \"hope\" });\n\n    return {\n      name: \"vuepress-plugin-lightgallery\",\n\n      define: (): Record<string, unknown> => ({\n        IMAGE_SELECTOR:\n          options.selector || \".theme-default-content :not(a) > img\",\n        LIGHT_GALLERY_DELAY: options.delay || 500,\n        LIGHT_GALLERY_OPTIONS: options.options || {},\n        LIGHT_GALLERY_AUTOPLAY: plugins.includes(\"autoplay\"),\n        LIGHT_GALLERY_FULLSCREEN: plugins.includes(\"fullscreen\"),\n        LIGHT_GALLERY_PAGER: plugins.includes(\"pager\"),\n        LIGHT_GALLERY_THUMBNAIL: plugins.includes(\"thumbnail\"),\n        LIGHT_GALLERY_ROTATE: plugins.includes(\"rotate\"),\n        LIGHT_GALLERY_SHARE: plugins.includes(\"share\"),\n        LIGHT_GALLERY_ZOOM: plugins.includes(\"zoom\"),\n      }),\n\n      extendsBundlerOptions: (config: unknown, app): void => {\n        addViteOptimizeDepsExclude({ app, config }, [\n          \"lightgallery/lightgallery.es5.js\",\n          ...plugins.map(\n            (name) => `lightgallery/plugins/${name}/lg-${name}.es5.js`\n          ),\n        ]);\n        addViteOptimizeDepsExclude({ app, config }, [\"lightgallery\"]);\n      },\n\n      clientConfigFile: path.resolve(__dirname, \"../client/config.js\"),\n    };\n  };\n"],"names":["logger","Logger","__dirname","getDirname","lightgalleryPlugin","options","app","plugins","useSassPalettePlugin","config","addViteOptimizeDepsExclude","name","path"],"mappings":"+MAEaA,EAAS,IAAIC,EAAO,8BAA8B,ECOzDC,EAAYC,EAAW,YAAY,GAAG,EAE/BC,EACX,CAACC,EAA+B,CAAC,IAChCC,GAAQ,CACHA,EAAI,IAAI,SAASN,EAAO,KAAK,WAAYK,CAAO,EAEpD,MAAME,EAAUF,EAAQ,SAAW,CAAC,QAAS,QAAS,MAAM,EAE5D,OAAAG,EAAqBF,EAAK,CAAE,GAAI,MAAO,CAAC,EAEjC,CACL,KAAM,+BAEN,OAAQ,KAAgC,CACtC,eACED,EAAQ,UAAY,uCACtB,oBAAqBA,EAAQ,OAAS,IACtC,sBAAuBA,EAAQ,SAAW,CAAA,EAC1C,uBAAwBE,EAAQ,SAAS,UAAU,EACnD,yBAA0BA,EAAQ,SAAS,YAAY,EACvD,oBAAqBA,EAAQ,SAAS,OAAO,EAC7C,wBAAyBA,EAAQ,SAAS,WAAW,EACrD,qBAAsBA,EAAQ,SAAS,QAAQ,EAC/C,oBAAqBA,EAAQ,SAAS,OAAO,EAC7C,mBAAoBA,EAAQ,SAAS,MAAM,CAC7C,GAEA,sBAAuB,CAACE,EAAiBH,IAAc,CACrDI,EAA2B,CAAE,IAAAJ,EAAK,OAAAG,CAAO,EAAG,CAC1C,mCACA,GAAGF,EAAQ,IACRI,GAAS,wBAAwBA,QAAWA,UAC/C,CACF,CAAC,EACDD,EAA2B,CAAE,IAAAJ,EAAK,OAAAG,CAAO,EAAG,CAAC,cAAc,CAAC,CAC9D,EAEA,iBAAkBG,EAAK,QAAQV,EAAW,qBAAqB,CACjE,CACF"}