import{getDirname as j,path as T,colors as f,fs as y}from"@vuepress/utils";import{useSassPalettePlugin as w}from"vuepress-plugin-sass-palette";import{Logger as P,getLocales as B,getDirContents as S,useCustomDevServer as x}from"vuepress-shared/node";import{ensureEndingSlash as I}from"@vuepress/shared";const O={"/en/":{backToTop:"Back to top"},"/zh/":{backToTop:"返回顶部"},"/zh-tw/":{backToTop:"返回頂部"},"/de-at/":{backToTop:"Zurück nach oben."},"/vi/":{backToTop:"Trở lại đầu trang"},"/uk/":{backToTop:"Повернутися до початку"},"/ru/":{backToTop:"Вернуться к началу"},"/br/":{backToTop:"Volta ao topo"},"/pl/":{backToTop:"Wróć na górę"},"/sk/":{backToTop:"Back to top"},"/fr/":{backToTop:"Back to top"},"/es/":{backToTop:"Volver arriba"},"/ja/":{backToTop:"このページのトップへ戻る"},"/tr/":{backToTop:"En başa dön"},"/ko/":{backToTop:"맨 위로"}},u=new P("vuepress-plugin-components"),v=j(import.meta.url),d=I(T.resolve(v,"../client")),g=T.resolve(v,"../../assets/pdfjs-3.1.81-legacy-dist"),F=(o="")=>o==="fontawesome"||o.match(/^(?:https:)?\/\/kit\.fontawesome\.com\//)?"fas fa-":o==="iconfont"||o.match(/^(?:https:)?\/\/at\.alicdn\.com\/t\//)?"iconfont icon-":"",m=({options:o,deprecatedOption:p,newOption:c,msg:s="",scope:a=""})=>{if(p in o){if(u.warn(`${f.magenta(p)} is ${f.yellow("deprecated")}${a?` in ${a}`:""}, please use "${f.magenta(c)}" instead.${s?`
${s}`:""}`),c.includes(".")){const n=c.split(".");let e=o;n.forEach((t,r)=>{r!==n.length-1?(e[t]=e[t]||{},e=e[t]):e[t]=o[p]})}else o[c]=o[p];delete o[p]}},D=o=>{m({options:o,deprecatedOption:"iconAssets",newOption:"componentOptions.fontIcon.assets"}),m({options:o,deprecatedOption:"iconPrefix",newOption:"componentOptions.fontIcon.prefix"}),m({options:o,deprecatedOption:"addThis",newOption:"rootComponents.addThis"}),m({options:o,deprecatedOption:"backToTop",newOption:"rootComponents.backToTop"}),m({options:o,deprecatedOption:"notice",newOption:"rootComponents.notice"}),m({options:o,deprecatedOption:"backToTopLocales",newOption:"locales.backToTop"})},E=["AudioPlayer","Badge","BiliBili","CodePen","FontIcon","PDF","StackBlitz","VideoPlayer","YouTube"],L=o=>{if(!o)return null;if(o==="fontawesome")return{type:"script",content:"https://kit.fontawesome.com/ca37c296c5.js"};if(o==="iconfont")return{type:"style",content:'@import url("//at.alicdn.com/t/font_2410206_a0xb9hku9iu.css");'};const p=o.match(/^(?:https?:)?\/\//g)?o:`//${o}`;return p.endsWith(".css")?{type:"style",content:`@import url("${o}");`}:p.endsWith(".js")?{type:"script",content:o}:(u.error(`Can not recognize icon link: "${o}"`),null)},_=(o,{components:p=[],componentOptions:c={},rootComponents:s={}})=>{let a="",n="",e="",t="",r=!1,l=!1,h=!1;return p.forEach(i=>{var k;if(E.includes(i)&&(a+=`import ${i} from "${d}components/${i}.js";
`,n+=`app.component("${i}", ${i});
`),i==="FontIcon"){const b=L((k=c.fontIcon)==null?void 0:k.assets);if(b){const{type:C,content:$}=b;C==="script"?(l=!0,e+=`useScriptTag(\`${$}\`);
`):(h=!0,e+=`useStyleTag(\`${$}\`, { id: "icon-assets" });
`)}}}),typeof s.addThis=="string"&&(l=!0,e+=`useScriptTag(\`//s7.addthis.com/js/300/addthis_widget.js#pubid=${s.addThis}\`);
`),s.backToTop&&(r=!0,a+=`import BackToTop from "${d}components/BackToTop.js";
`,t+=`() => h(BackToTop, { threshold: ${typeof s.backToTop=="number"?s.backToTop:300} }),
`),typeof s.notice=="object"&&(r=!0,a+=`import Notice from "${d}components/Notice.js";
`,t+=`() => h(Notice, ${JSON.stringify(s.notice)}),
`),o.writeTemp("components/config.js",`import { defineClientConfig } from "@vuepress/client";
${r?`import { h } from "vue";
`:""}
${l?`import { useScriptTag } from "${d}vueuse.js";
`:""}${h?`import { useStyleTag } from "${d}vueuse.js";
`:""}${a}

import "${d}styles/sr-only.scss";

export default defineClientConfig({
  enhance: ({ app }) => {
${n.split(`
`).map(i=>`    ${i}`).join(`
`)}
  },
  setup: () => {
${e.split(`
`).map(i=>`    ${i}`).join(`
`)}
  },
  rootComponents: [
${t.split(`
`).map(i=>`    ${i}`).join(`
`)}
  ],
});
`)},W=(o,p=!1)=>c=>{var s;p&&D(o),c.env.isDebug&&u.info("Options:",o),w(c,{id:"hope"});const a=(s=o.components)==null?void 0:s.includes("PDF");return{name:"vuepress-plugin-components",define:()=>{var n,e;const{assets:t,prefix:r}=((n=o.componentOptions)==null?void 0:n.fontIcon)||{};return{BACK_TO_TOP_LOCALES:B({app:c,name:"backToTop",default:O,config:(e=o.locales)==null?void 0:e.backToTop}),ICON_PREFIX:typeof r=="string"?r:F(t)}},extendsBundlerOptions:(n,e)=>{a&&S(g).forEach(t=>{x({app:e,config:n},{path:`/assets/lib/pdfjs/${t}`,response:(r,l)=>(t.endsWith(".html")?l.setHeader("Content-Type","text/html"):t.endsWith(".css")?l.setHeader("Content-Type","text/css"):t.endsWith(".js")?l.setHeader("Content-Type","application/javascript"):t.endsWith(".svg")&&l.setHeader("Content-Type","image/svg+xml"),y.readFile(T.resolve(g,t)))})})},clientConfigFile:n=>_(n,o),onGenerated:async n=>{a&&await y.copy(g,n.dir.dest("assets/lib/pdfjs"))}}};export{O as backToTopLocales,W as componentsPlugin};
//# sourceMappingURL=index.js.map
